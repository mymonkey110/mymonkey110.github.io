<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta name="google-site-verification" content="dOa1DsNrFPTHLB7PCkDCzVn_7nnJXGgiPV8l8ZSRvD4"><meta content="telephone=no" name="format-detection"><meta name="description"><title>让百度索引你的github的博客 | Michael-J</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/4.2.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">让百度索引你的github的博客</h1><a id="logo" href="/.">Michael-J</a><p class="description">一个修行路上的码农</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 足记</i></a><a href="/about/"><i class="fa fa-user"> 我</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">让百度索引你的github的博客</h1><div class="post-meta">Jun 23, 2016<span> | </span><span class="category"><a href="/categories/生活/">生活</a></span><!--script(src='https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js', async)--><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-disqus-identifier="2016/06/23/让百度索引你的github的博客/" href="/2016/06/23/让百度索引你的github的博客/#disqus_thread" class="disqus-comment-count"></a><br class="clear"><div class="post-ref"><blockquote><p>本文由Michael Jiang原创，转载请注明原文链接：<a href="http://michael-j.net/2016/06/23/让百度索引你的github的博客/">http://michael-j.net/2016/06/23/让百度索引你的github的博客/</a></p></blockquote></div><div class="post-content"><p>不知不觉中，写博客是一件很潮的事情，尤其是程序员。自然，我也是其中的一员。博客无非两种类型，一种是动态类型的，以Wordpress为代表；另外一种则是存静态的，以Hexo, Jekyll为代表。现在，程序员都喜欢把博客托管在github上。一来省去了买虚拟主机的费用，二来可以通过git工具来管理博客，用起来十分方便。我的博客就是用hexo搭建的。</p>
<p>首先，github是不支持动态博客的，它只能托管存静态的网页，也就是说你只能放置一些html,js,css,jpg,png…之类的静态文件。其次，github屏蔽了百度的爬虫，也就是说百度不能索引你的博客内容。虽说程序员基本上都用google，但是你肯定还是想能被百度搜索到的。想知道自己的博客是否被索引可以这样查询，在搜索引擎中输入：site: 你的博客域名。</p>
<p>解决github屏蔽百度爬虫的思路就是“迁出”我们的博客，让百度爬虫不直接访问github就行了。</p>
<h2 id="方案一：利用CDN制作镜像网站"><a href="#方案一：利用CDN制作镜像网站" class="headerlink" title="方案一：利用CDN制作镜像网站"></a>方案一：利用CDN制作镜像网站</h2><p>我们知道cdn能缓存静态资源，如果我们利用cdn制作我们的镜像网站，再将百度索引的解析cdn上，那么爬虫就不会访问github服务器了，而是访问cdn缓存服务器。国内最火的cdn服务商就是七牛和又拍云了。我发现七牛不支持自动回源功能，而又拍云在这方面做得比较好，我们可以使用又拍云来做为我们博客的镜像网站。</p>
<p>我以本站为例，讲一下配置的流程：</p>
<h4 id="1-创建服务"><a href="#1-创建服务" class="headerlink" title="1. 创建服务"></a>1. 创建服务</h4><p>   <img src="/images/baidu_index/3.pic_hd.jpg" alt="创建服务"></p>
<h4 id="2-配置回源"><a href="#2-配置回源" class="headerlink" title="2. 配置回源"></a>2. 配置回源</h4><p>   <img src="/images/baidu_index/5.pic_hd.jpg" alt="配置回源"></p>
<h4 id="3-绑定域名"><a href="#3-绑定域名" class="headerlink" title="3. 绑定域名"></a>3. 绑定域名</h4><p>完成上面的操作后，又拍云会自动分配一个域名给我。此时，我们就需要绑定自己的域名。添加需要绑定的域名：</p>
<p>   <img src="/images/baidu_index/5.pic.jpg" alt="绑定域名"></p>
<p>如果你希望博客能以www的方式来访问，那你还需要添加www的二级域名</p>
<h4 id="4-配置解析"><a href="#4-配置解析" class="headerlink" title="4. 配置解析"></a>4. 配置解析</h4><p>添加完域名绑定后，此时我们就只需要配置dns解析到又拍云了。我使用的是阿里云的域名系统，下图就是我设置的域名解析配置。</p>
<p>   <img src="/images/baidu_index/6.pic_hd.jpg" alt="配置解析"></p>
<p>因为github在国外访问速度还是很快的，所以对于海外的用户直接访问github就可以了，不用再访问又拍云了。<br>添加解析后一般需要几分钟才生效，看自己添加的域名dns解析生效了没有可以使用nslookup命令：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">~/blog  ᐅ nslookup michael-j<span class="selector-class">.net</span></div><div class="line">Server:		<span class="number">192.168</span>.<span class="number">199.2</span></div><div class="line">Address:	<span class="number">192.168</span>.<span class="number">199.2</span>#<span class="number">53</span></div><div class="line"></div><div class="line">Non-authoritative answer:</div><div class="line">michael-j<span class="selector-class">.net</span>	canonical name = mj-blog<span class="selector-class">.b0</span><span class="selector-class">.aicdn</span><span class="selector-class">.com</span>.</div><div class="line">mj-blog<span class="selector-class">.b0</span><span class="selector-class">.aicdn</span><span class="selector-class">.com</span>	canonical name = ctn<span class="selector-class">.b9</span><span class="selector-class">.aicdn</span><span class="selector-class">.com</span>.</div><div class="line">Name:	ctn<span class="selector-class">.b9</span><span class="selector-class">.aicdn</span><span class="selector-class">.com</span></div><div class="line">Address: <span class="number">183.134</span>.<span class="number">101.194</span></div></pre></td></tr></table></figure>
<p>  此时，我发现michael-j.net的域名已经成功解析到了又拍云。</p>
<ol>
<li>完成</li>
</ol>
<p>完成以上步骤后，你会收到又拍云发给你关于域名绑定通过的邮件。此时你就可以在浏览器中访问你的博客啦！</p>
<p>最关键的问题是，我们要验证百度是否能正常的抓取我们的博客？ 我们使用百度站长的测试工具来测试一下：</p>
<p>  <img src="/images/baidu_index/7.pic_hd.jpg" alt="抓取诊断"></p>
<p>哈哈，现在百度终于可以正常爬去我们的网站啦，接下来就是耐心的等待了，一般最多七天百度就会收录了。</p>
<h2 id="方案二：自己托管博客"><a href="#方案二：自己托管博客" class="headerlink" title="方案二：自己托管博客"></a>方案二：自己托管博客</h2><p>与利用cdn来制作镜像网站的思路一样，我们完全可以把博客托管在自己的服务器上，当然你得掏银子啦！💰 我个人觉得自己买一台属于自己的虚拟主机还是值得投入了，除了博客外你可以利用这台机器做很多事情，最低配的ecs也花不了多少钱，可以几个人合用一台。</p>
<p>Nginx是世界有名的反向代理服务器，同时它对静态文件的支持非常好，性能很高。我们完全可以利用Nginx来作我们博客的服务器。</p>
<h4 id="1-安装Nginx"><a href="#1-安装Nginx" class="headerlink" title="1. 安装Nginx"></a>1. 安装Nginx</h4><p>Ubuntu\Debian：<code>apt-get install nginx</code></p>
<p>Centos\Redhat: <code>yum install nginx</code></p>
<p>其他系统自行google</p>
<h4 id="2-配置Nginx"><a href="#2-配置Nginx" class="headerlink" title="2. 配置Nginx"></a>2. 配置Nginx</h4><p>在/etc/nginx/conf.d新作配置，一定要以<code>.conf</code>结尾。我新建名为<code>michael-j.net.conf</code>的配置文件：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="section">server</span> &#123;</div><div class="line">   	<span class="attribute">listen</span> <span class="number">80</span>;</div><div class="line">   	<span class="attribute">server_name</span> michael-j.net;</div><div class="line"></div><div class="line">   	<span class="attribute">location</span> / &#123;</div><div class="line">   	  <span class="attribute">root</span> /home/michael/mymonkey110.github.io;</div><div class="line">   	  <span class="attribute">index</span> index.html;</div><div class="line">   	&#125;</div><div class="line"></div><div class="line">   	<span class="attribute">access_log</span> /var/log/nginx/michael-j.access.log;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>注意root是我们博客的目录，后面会提到。</p>
<h4 id="3-重启nginx"><a href="#3-重启nginx" class="headerlink" title="3. 重启nginx"></a>3. 重启nginx</h4><p>执行<code>nginx -s reload</code>生效</p>
<h4 id="4-自动下载博客内容"><a href="#4-自动下载博客内容" class="headerlink" title="4. 自动下载博客内容"></a>4. 自动下载博客内容</h4><p>我希望每次博客仓库有更新的时候能自动重建本地仓库，为此我专门写了一个工具git-watcher: <a href="https://github.com/mymonkey110/git-watcher" target="_blank" rel="external">https://github.com/mymonkey110/git-watcher</a>。当有新的内容push到你的仓库是，它会自动拉去并重建本地仓库。基本原理就是利用github的webhook功能，当有新的push事件发生时，github会发布相应的事件到指定的接口。git-watcher监听push事件，当接受到push事件去pull仓库。如果你觉得这个工具有点儿意思，Please star it.</p>
<h5 id="4-1-安装git-watcher-amp-git"><a href="#4-1-安装git-watcher-amp-git" class="headerlink" title="4.1 安装git-watcher &amp; git"></a>4.1 安装git-watcher &amp; git</h5><p><code>pip install git-watcher</code></p>
<p><code>apt-get install git</code></p>
<h5 id="4-2-启动git-watcher"><a href="#4-2-启动git-watcher" class="headerlink" title="4.2 启动git-watcher"></a>4.2 启动git-watcher</h5><p><code>git-watcher -u https://github.com/mymonkey110/mymonkey110.github.io.git -s 654321</code></p>
<p><code>-u</code>参数配置我们的博客仓库地址</p>
<p><code>-s</code>参数是我们webhook的secret key</p>
<p>git-watcher还支持其他一些参数配置，-h见说明</p>
<h5 id="4-3-配置dns解析"><a href="#4-3-配置dns解析" class="headerlink" title="4.3 配置dns解析"></a>4.3 配置dns解析</h5><p>将默认的dns解析到我们自己的主机上</p>
<p><img src="/images/baidu_index/10.pic_hd.jpg" alt="配置解析"></p>
<h5 id="4-4-配置webhook"><a href="#4-4-配置webhook" class="headerlink" title="4.4 配置webhook"></a>4.4 配置webhook</h5><p>进入仓库的<code>settings</code> －&gt; <code>Webhooks &amp; services</code></p>
<p>设置：<code>Payload URL</code>，这里输入我们主机的地址，这里只能用ip地址。同时，还要设置Secret，这个是用来签名body内容用的，一定要与git-watcher中配置一致</p>
<p><img src="/images/baidu_index/13.pic.jpg" alt="配置Webhook"></p>
<p>注意，我们只选择发送<code>push</code>事件就可以了。</p>
<h5 id="4-5-测试"><a href="#4-5-测试" class="headerlink" title="4.5 测试"></a>4.5 测试</h5><p>我们进行一些修改，然后push到博客的仓库，检测一下网站内容是否更新。如果正常更新，那说明已经大功告成了。这是可以再用百度的抓取工具进行诊断。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>解决百度抓取github内容的问题基本思路都是让百度不直接访问Github，而是通过一个中间服务器来缓存内容。两种方式都需要付费，相对来说使用又拍云搭建镜像服务器在流量较小的情况下比较有优势，速度快，费用少；而自己租用主机在博客流量较大的时候比较经济，你可以选择按带宽计费的方式，同时你还获得了一台完全由你控制的主机，何乐而不为呢？！</p>
<hr><p>This article used CC-BY-SA-3.0 license, please follow it.</p></div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://michael-j.net/2016/06/23/让百度索引你的github的博客/" data-id="cj3ebm2sb001hl0tahl77ajt1" class="article-share-link">分享到</a><div class="tags"><a href="/tags/life-blog/">life blog</a></div><div class="post-nav"><a href="/2016/08/02/Zookeeper-distributed-process-coordination/" class="pre">Zookeeper:distributed process coordination中文版</a><a href="/2016/06/17/博客域名更新/" class="next">博客域名更新：michael-j.net</a></div><div id="disqus_thread"><script>var disqus_shortname = 'michael-j';
var disqus_identifier = '2016/06/23/让百度索引你的github的博客/';
var disqus_title = '让百度索引你的github的博客';
var disqus_url = 'http://michael-j.net/2016/06/23/让百度索引你的github的博客/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//michael-j.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/C/">C#</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/DDD/">DDD</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/OO的艺术/">OO的艺术</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/debug/">debug</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/云计算/">云计算</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/安全/">安全</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/架构设计/">架构设计</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/生活/">生活</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/网络/">网络</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/翻译/">翻译</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/踩过的那些坑/">踩过的那些坑</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/部署/">部署</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Value-Object-DDD/" style="font-size: 15px;">Value Object DDD</a> <a href="/tags/btrace/" style="font-size: 15px;">btrace</a> <a href="/tags/websocket/" style="font-size: 15px;">websocket</a> <a href="/tags/life/" style="font-size: 15px;">life</a> <a href="/tags/debug-springboot-deserialized-redis/" style="font-size: 15px;">debug springboot deserialized redis</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/tomcat/" style="font-size: 15px;">tomcat</a> <a href="/tags/package-autoconfig/" style="font-size: 15px;">package autoconfig</a> <a href="/tags/zookeeper/" style="font-size: 15px;">zookeeper</a> <a href="/tags/distributed-lock/" style="font-size: 15px;">distributed lock</a> <a href="/tags/C-tcp-udp-network/" style="font-size: 15px;">C# tcp udp network</a> <a href="/tags/domain-event/" style="font-size: 15px;">domain event</a> <a href="/tags/cloud-访问控制-设计-DSL-云计算/" style="font-size: 15px;">cloud 访问控制 设计 DSL 云计算</a> <a href="/tags/架构-设计-DDD/" style="font-size: 15px;">架构 设计 DDD</a> <a href="/tags/life-blog/" style="font-size: 15px;">life blog</a> <a href="/tags/enum-OO/" style="font-size: 15px;">enum OO</a> <a href="/tags/blog/" style="font-size: 15px;">blog</a> <a href="/tags/访问控制-cloud-云计算-DSL/" style="font-size: 15px;">访问控制 cloud 云计算 DSL</a> <a href="/tags/comment-design/" style="font-size: 15px;">comment design</a> <a href="/tags/security/" style="font-size: 15px;">security</a> <a href="/tags/network-engineering/" style="font-size: 15px;">network engineering</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/06/01/访问控制：为你的云上业务再加一把锁/">访问控制：为你的云上业务再加一把锁</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/21/评论从多说迁移到Disqus/">评论从多说迁移到Disqus</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/07/对云环境下访问控制系统的思考/">对云环境下访问控制系统的思考</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/21/Spring-Boot反序列对象失败/">Spring Boot反序列对象失败</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/15/架构为什么会腐化/">架构为什么会腐化</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/18/值对象的威力/">值对象的威力</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/20/论Enum的重要性/">论Enum的重要性</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/18/DDD-复杂问题解决之道/">DDD-复杂问题解决之道</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/02/Zookeeper-distributed-process-coordination/">Zookeeper:distributed process coordination中文版</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/23/让百度索引你的github的博客/">让百度索引你的github的博客</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> 最近评论</i></div><script type="text/javascript" src="//michael-j.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.fegirl.com/" title="fegirl" target="_blank">fegirl</a><ul></ul><a href="https://work-jlsun.github.io" title="tom哥" target="_blank">tom哥</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">Michael-J.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a>本站总访问量 <span id="busuanzi_value_site_pv"></span>本站总访客数<span id="busuanzi_value_site_uv"></span><div><p> <span>浙ICP备15040413号-2 &nbsp;&nbsp; | &nbsp;&nbsp;</span><img src="/images/beian.png" style="margin-bottom:-4px"/><span>&nbsp;&nbsp;</span><span>浙公网安备 33010802005158号</span></p></div></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create','UA-64773431-2','auto');ga('send','pageview');
</script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?157f1b4ead183afaf48d4513691034f4";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>